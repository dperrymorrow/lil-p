(function(){Function.prototype.method=function(name,func){if(!this.prototype[name]){this.prototype[name]=func;
return this;}};}());(function(){String.method("pluralize",function(value){value=value||2;
return parseInt(value,10)>1?this+"s":this;});String.method("contains",function(checkFor){return this.indexOf(checkFor.toString())!==-1;
});String.method("singularize",function(){return this.substring(this.length-1,this.length)==="s"?this.substring(0,this.length-1):this;
});String.method("safe",function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");
});String.method("humanize",function(){return this.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/[_\-]/g," ").toLowerCase().trim();
});String.method("inject",function(scope){var matches=this.match(/\#\{.+?\}/g);var pretified=this;
for(var m in matches){var match=matches[m];var variable=match.substr(2,match.length-3);
var result=scope[variable];pretified=pretified.replace(match,result);}return pretified;
});String.method("wordWrap",function(len,chars){var i=0,z=0,str=this.toString(),chunks=[],chunk="";
len=(typeof len!=="number")?null:len;chars=(typeof chars!=="object")?null:chars;chars=chars||["/","-"," "];
len=len||25;for(i=0;i<=str.length;i+=len){chunks.push(str.substring(i,i+len));}for(i=0;
i<chunks.length;i+=1){chunk=chunks[i];for(z=0;z<=chars.length;z+=1){chunk=chunk.split(chars[z]).join(chars[z]+"<wbr>");
}if(chunk.contains("<wbr>")===false&&i!==chunks.length-1){chunk+="<wbr>";}chunks[i]=chunk;
}return chunks.join("");});String.method("truncate",function(length,append){append=append||"...";
length=length||10;return this.length>length?this.substring(0,length).trimRight()+append:this;
});String.method("trim",function(){return this.replace(/^\s+|\s+$/g,"");});String.method("trimLeft",function(){return this.replace(/^\s+/,"");
});String.method("trimRight",function(){return this.replace(/\s+$/,"");});}());(function(){Date.timeStampUnits={year:31536000000,month:2628000000,week:604800000,day:86400000,hour:3600000,minute:60000,second:1000};
Date.timeUnitsOrder=["year","month","week","day","hour","minute","second"];Date.method("setTimeAgo",function(phrase,startDate){var amount,unit,arr=phrase.split(" ");
if(arr.length!==2){throw"You must pass in a phrase in '2 Years' format!";}startDate=startDate instanceof Date?startDate:new Date();
amount=parseInt(arr[0],10);unit=arr[1].toLowerCase().singularize();this.setTime(startDate.getTime()-(amount*Date.timeStampUnits[unit]));
return this;});Date.method("distanceInWords",function(from,suffix){var i=0,diff=0,nextSmallestUnit="",unit="",wholeUnits=0,remainder=0,str="";
suffix=(typeof suffix==="undefined")?" ago":" "+suffix.trim();from=(from instanceof Date===false)?new Date():from;
diff=Math.abs(from.getTime()-this.getTime());if(diff<Date.timeStampUnits.minute){return"less than a minute"+suffix;
}for(i=0;i<Date.timeUnitsOrder.length;i=i+1){unit=Date.timeUnitsOrder[i];nextSmallestUnit=Date.timeUnitsOrder[i+1];
if(diff>Date.timeStampUnits[unit]*0.9&&diff<Date.timeStampUnits[unit]*1.1){return"about one "+unit+suffix;
}if(diff>=Date.timeStampUnits[unit]){wholeUnits=diff/Date.timeStampUnits[unit];remainder=wholeUnits.toString().split(".")[1];
remainder=(diff/Date.timeStampUnits[unit]-wholeUnits.toFixed(0))*Date.timeStampUnits[unit];
remainder=Math.round(remainder/Date.timeStampUnits[nextSmallestUnit]);if(wholeUnits>0){str=wholeUnits.toFixed(0)+" "+unit.pluralize(wholeUnits);
}if(remainder>0){str=str+", "+remainder+" "+nextSmallestUnit.pluralize(remainder);
}return str+suffix;}}});}());
